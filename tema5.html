<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gu√≠a Interactiva: Funciones en JavaScript (2025)</title>
    <!-- Tailwind 2.x CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        :root{
            --azul:#1D4ED8; /* Indigo-700 */
            --morado:#6B46C1; /* Purple-700 */
            --azulClaro:#3B82F6; /* Blue-500 */
        }
        html{scroll-behavior:smooth}
        .key-term{color:var(--azul);font-weight:700}
        .section-title{color:var(--morado)}
        .section{border-left:4px solid var(--azulClaro);padding-left:1rem}
        pre{background:#f6f8fa;padding:1rem;border-radius:12px;overflow-x:auto}
        code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
        .chip{background:rgba(59,130,246,.1);color:#1e40af;padding:.25rem .6rem;border-radius:9999px;font-size:.75rem}
        .card-gradient{background:linear-gradient(135deg, rgba(29,78,216,.08), rgba(107,70,193,.06));}
        .shine{position:relative;overflow:hidden}
        .shine::after{content:"";position:absolute;top:-120%;left:-120%;width:240%;height:240%;background:linear-gradient(120deg, transparent 40%, rgba(255,255,255,.25), transparent 60%);transform:rotate(10deg);animation:shine 7s infinite}
        @keyframes shine{0%{transform:translateX(-120%) rotate(10deg)}100%{transform:translateX(120%) rotate(10deg)}}
        .anchor:before{content:"";display:block;height:80px;margin-top:-80px;visibility:hidden}
        table{width:100%;border-collapse:collapse;margin:1rem 0}
        th,td{border:1px solid #e5e7eb;padding:.75rem;text-align:left}
        th{background-color:var(--azulClaro);color:#fff}
        .code-wrap{position:relative}
        .code-toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}
        .btn{font-size:.8rem;border:1px solid #d1d5db;padding:.35rem .6rem;border-radius:.75rem;background:#fff;display:inline-flex;align-items:center;gap:.4rem}
        .btn:hover{box-shadow:0 2px 10px rgba(0,0,0,.06)}
        .btn[disabled]{opacity:.5;cursor:not-allowed}
        .hl{background:rgba(59,130,246,.16);padding:.05rem .15rem;border-radius:.25rem;cursor:pointer}
        .hl.active{outline:2px solid var(--azulClaro)}
        .tooltip{position:absolute;z-index:20;background:#111827;color:#F9FAFB;padding:.5rem .65rem;border-radius:.5rem;font-size:.8rem;box-shadow:0 8px 30px rgba(0,0,0,.25);max-width:260px}
        .tooltip::after{content:"";position:absolute;border:7px solid transparent;border-top-color:#111827;bottom:-14px;left:12px}
        .output{background:#0b1220;color:#D1E7FF;border-radius:.75rem;padding:.75rem;min-height:2.25rem;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
        .step-focus{background:linear-gradient(90deg, rgba(59,130,246,.18), rgba(107,70,193,.18));border-radius:.35rem}
        @media(min-width:1024px){nav[aria-label="Contenido"]{position:sticky;top:1rem;height:fit-content}}
    </style>
</head>
<body class="bg-gray-50 font-sans">
<header class="relative bg-gradient-to-r from-blue-700 via-indigo-700 to-purple-700 text-white">
    <div class="absolute inset-0 opacity-20 bg-center bg-cover" style="background-image:url('https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1600&auto=format&fit=crop');"></div>
    <div class="container mx-auto px-6 py-14 relative">
        <div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6">
            <div>
                <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight shine">
                    <i class="fa-solid fa-code mr-3"></i> Gu√≠a Interactiva de Funciones en JavaScript
                </h1>
                <p class="mt-3 text-lg text-blue-100 max-w-2xl">Desde <span class="font-semibold">qu√© es una funci√≥n</span> hasta <span class="font-semibold">funciones flecha</span>, con simulaciones, buenas pr√°cticas y un mini-proyecto de <strong>cajero autom√°tico</strong>.</p>
                <div class="mt-4 space-x-2">
                    <span class="chip"><i class="fa-solid fa-graduation-cap mr-1"></i>B√°sico a Intermedio</span>
                    <span class="chip"><i class="fa-solid fa-laptop-code mr-1"></i>JavaScript</span>
                    <span class="chip"><i class="fa-solid fa-hand-pointer mr-1"></i>Interactivo</span>
                </div>
            </div>
            <nav aria-label="Contenido" class="bg-white/10 backdrop-filter backdrop-blur rounded-2xl p-4 w-full lg:w-96 shadow-lg">
                <h2 class="font-semibold mb-2"><i class="fa-solid fa-list-check mr-2"></i>√çndice</h2>
                <ol class="grid grid-cols-1 gap-2 text-sm">
                    <li><a href="#intro" class="hover:underline">0. Introducci√≥n</a></li>
                    <li><a href="#que-es" class="hover:underline">1. ¬øQu√© es una funci√≥n?</a></li>
                    <li><a href="#sintaxis" class="hover:underline">2. Sintaxis (declaraci√≥n)</a></li>
                    <li><a href="#sin-ps-sin-r" class="hover:underline">3. Sin par√°metros y sin retorno</a></li>
                    <li><a href="#con-ps-con-r" class="hover:underline">4. Con par√°metros y con retorno</a></li>
                    <li><a href="#sin-ps-con-r" class="hover:underline">5. Sin par√°metros y con retorno</a></li>
                    <li><a href="#atm" class="hover:underline">6. Mini proyecto: Cajero Autom√°tico</a></li>
                    <li><a href="#flecha" class="hover:underline">7. Funci√≥n flecha: ¬øqu√© es? + ejemplos</a></li>
                    <li><a href="#retos" class="hover:underline font-semibold">Retos</a></li>
                </ol>
            </nav>
        </div>
    </div>
</header>

<main class="container mx-auto px-6 py-10">
    <!-- Intro -->
    <section id="intro" class="mb-10 section card-gradient rounded-xl shadow anchor">
        <div class="p-6">
            <h2 class="text-2xl font-semibold section-title">
                <i class="fa-solid fa-lightbulb mr-2"></i> ¬øPor qu√© funciones?
            </h2>
            <p class="mt-2 text-gray-700">Una <span class="key-term">funci√≥n</span> encapsula instrucciones bajo un <em>nombre</em> para poder <strong>reutilizarlas</strong>, <strong>organizar</strong> el c√≥digo y <strong>evitar repeticiones</strong>. En esta gu√≠a no usamos <strong>arreglos</strong> para que el foco est√© en los fundamentos.</p>
        </div>
    </section>

    <!-- 1. Qu√© es una funci√≥n -->
    <section id="que-es" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-circle-question mr-2"></i> 1) ¬øQu√© es una funci√≥n en JavaScript?</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p><span class="key-term">Definici√≥n:</span> Bloque de c√≥digo <em>nombrado</em> que puedes <strong>invocar</strong> para ejecutar una tarea. Puede <span class="key-term">recibir par√°metros</span> (datos de entrada) y <span class="key-term">retornar</span> un valor.</p>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn explain-btn"><i class="fa-solid fa-highlighter"></i> Explicarme</button>
                        <button class="btn play-btn" data-target="#out-que-es" data-run="runQueEs"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Declarar y usar una funci√≥n
function saludar(){
  console.log("Hola, Dev!");
}
// invocaci√≥n
saludar();
</code></pre>
                    <div class="output mt-2" id="out-que-es"></div>
                </div>
                <div>
                    <ul class="list-disc pl-6 text-gray-700">
                        <li><span class="key-term">Declaraci√≥n</span>: define el bloque de c√≥digo.</li>
                        <li><span class="key-term">Invocaci√≥n</span>: ejecuta la funci√≥n por su nombre.</li>
                        <li><span class="key-term">Alcance</span>: variables internas no se ven fuera.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 2. Sintaxis -->
    <section id="sintaxis" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-code-commit mr-2"></i> 2) Sintaxis de una funci√≥n (declaraci√≥n)</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <span class="chip">Sintaxis</span>
            <pre class="mt-2"><code><span class="hl" data-tip="Palabra reservada">function</span> <span class="hl" data-tip="Identificador">nombre</span>(<span class="hl" data-tip="Par√°metros opcionales">param1, param2</span>) {
  <span class="hl" data-tip="Cuerpo de la funci√≥n">// instrucciones</span>
  <span class="hl" data-tip="Devuelve un valor opcional">return valor;</span>
}</code></pre>
            <div class="mt-5 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-sintaxis" data-run="runSintaxis"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// √Årea de un rect√°ngulo (param y retorno)
function areaRect(base, altura){
  return base * altura;
}
console.log("√Årea:", areaRect(8, 5));
</code></pre>
                    <div class="output mt-2" id="out-sintaxis"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn explain-btn"><i class="fa-solid fa-highlighter"></i> Explicarme</button>
                    </div>
                    <pre><code>// Buenas pr√°cticas
// 1) Un nombre claro describe la acci√≥n
// 2) Una funci√≥n = una responsabilidad
// 3) Retorna datos, no prints (cuando debas reutilizar el resultado)</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. Sin par√°metros y sin retorno -->
    <section id="sin-ps-sin-r" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-bell mr-2"></i> 3) Funciones <em>sin</em> par√°metros y <em>sin</em> retorno</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p>Ejecutan una acci√≥n y no devuelven valor.</p>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-spsr" data-run="runSinParamSinReturn"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Notifica saldo bajo
function alertaSaldoBajo(){
  console.log("‚ö†Ô∏è Saldo por debajo del m√≠nimo");
}
alertaSaldoBajo();
</code></pre>
                    <div class="output mt-2" id="out-spsr"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-spsr2" data-run="runSinParamSinReturn2"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Imprime cabecera de reporte
function cabecera(){
  console.log("==== Reporte Diario ====");
}
cabecera();
</code></pre>
                    <div class="output mt-2" id="out-spsr2"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. Con par√°metros y con retorno -->
    <section id="con-ps-con-r" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-calculator mr-2"></i> 4) Funciones con par√°metros y con retorno</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p>Reciben datos de entrada y devuelven un resultado.</p>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-cpcr" data-run="runConParamConReturn"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Calcula IVA y total
function totalConIVA(subtotal, iva){
  const impuesto = subtotal * iva;
  const total = subtotal + impuesto;
  return total; // retorna el total
}
console.log("Total:", totalConIVA(85000, 0.19));
</code></pre>
                    <div class="output mt-2" id="out-cpcr"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-cpcr2" data-run="runConParamConReturn2"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Convierte de Celsius a Fahrenheit
function cToF(c){
  return (c * 9/5) + 32;
}
console.log("32¬∞C son", cToF(32), "¬∞F");
</code></pre>
                    <div class="output mt-2" id="out-cpcr2"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. Sin par√°metros y con retorno -->
    <section id="sin-ps-con-r" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-clock mr-2"></i> 5) Funciones sin par√°metros y con retorno</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p>Generan y devuelven un valor sin requerir datos de entrada.</p>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-spcr" data-run="runSinParamConReturn"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Hora formateada HH:MM
function horaActual(){
  const ahora = new Date();
  const h = String(ahora.getHours()).padStart(2,'0');
  const m = String(ahora.getMinutes()).padStart(2,'0');
  return h + ":" + m;
}
console.log("Hora:", horaActual());
</code></pre>
                    <div class="output mt-2" id="out-spcr"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-spcr2" data-run="runSinParamConReturn2"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Genera un c√≥digo simple (no usa arrays)
function codigo(){
  const base = Math.floor(Math.random()*9000) + 1000; // 1000..9999
  return "C-" + base;
}
console.log("C√≥digo:", codigo());
</code></pre>
                    <div class="output mt-2" id="out-spcr2"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. Mini proyecto: Cajero Autom√°tico -->
    <section id="atm" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-vault mr-2"></i> 6) Ejemplo pr√°ctico: Cajero Autom√°tico</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p>Simulaci√≥n m√≠nima de un cajero con funciones peque√±as. <strong>Sin arreglos</strong>, todo con variables simples.</p>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn explain-btn"><i class="fa-solid fa-highlighter"></i> Explicarme</button>
                        <button class="btn play-btn" data-target="#out-atm" data-run="runATM"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// Cajero: consultar, depositar, retirar
let saldo = 150000; // COP

function consultar(){
  console.log("Saldo:", saldo, "COP");
}

function depositar(monto){
  if (monto <= 0) return "Monto inv√°lido";
  saldo = saldo + monto;
  return "Dep√≥sito OK. Nuevo saldo: " + saldo + " COP";
}

function retirar(monto){
  if (monto <= 0) return "Monto inv√°lido";
  if (monto > saldo) return "Fondos insuficientes";
  saldo = saldo - monto;
  return "Retiro OK. Nuevo saldo: " + saldo + " COP";
}

consultar();
console.log(depositar(25000));
console.log(retirar(70000));
consultar();
</code></pre>
                    <div class="output mt-2" id="out-atm"></div>
                </div>
                <div>
                    <ul class="list-disc pl-6 text-gray-700">
                        <li><span class="key-term">Estado</span>: la variable <code>saldo</code> vive fuera y se modifica.</li>
                        <li><span class="key-term">Validaciones</span>: evita montos inv√°lidos y sobregiros.</li>
                        <li><span class="key-term">Reutilizaci√≥n</span>: cada acci√≥n es una funci√≥n independiente.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 7. Funci√≥n flecha -->
    <section id="flecha" class="mb-12 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-bolt mr-2"></i> 7) Funci√≥n flecha: ¬øqu√© es? + ejemplos</h2>
        <div class="p-6 bg-white rounded-xl shadow">
            <p>Una <span class="key-term">funci√≥n flecha</span> es una forma abreviada de crear funciones. No cambia sola el <code>this</code> y permite <em>retorno impl√≠cito</em> cuando el cuerpo es una sola expresi√≥n.</p>
            <div class="mt-4">
                <span class="chip">Patrones comunes (sin arrays)</span>
            </div>
            <div class="mt-4 grid md:grid-cols-2 gap-6">
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-f1" data-run="runFlecha1"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// 1) Sin par√°metros, sin retorno
const sonar = () => { console.log("üîî Ding!"); };
sonar();
</code></pre>
                    <div class="output mt-2" id="out-f1"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-f2" data-run="runFlecha2"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// 2) Con par√°metros y retorno impl√≠cito
const cuadrado = x => x * x; // una sola expresi√≥n
console.log("9^2 =", cuadrado(9));
</code></pre>
                    <div class="output mt-2" id="out-f2"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-f3" data-run="runFlecha3"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// 3) Con bloque y return expl√≠cito
const convertir = (monto, tasa) => {
  const total = monto * tasa;
  return total;
};
console.log("Total:", convertir(100000, 1.19));
</code></pre>
                    <div class="output mt-2" id="out-f3"></div>
                </div>
                <div class="code-wrap">
                    <div class="code-toolbar">
                        <button class="btn copy-btn"><i class="fa-regular fa-copy"></i> Copiar</button>
                        <button class="btn play-btn" data-target="#out-f4" data-run="runFlecha4"><i class="fa-solid fa-play"></i> Simular</button>
                    </div>
                    <pre class="code"><code>// 4) Retornar un objeto literal (sin arrays)
const crearTicket = (codigo, total) => ({ codigo: codigo, total: total });
const t = crearTicket("A-01", 55000);
console.log("Ticket:", t.codigo + ", " + t.total + " COP");
</code></pre>
                    <div class="output mt-2" id="out-f4"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Retos -->
    <section id="retos" class="mb-16 section anchor">
        <h2 class="text-3xl font-semibold mb-4 section-title"><i class="fa-solid fa-trophy mr-2"></i> Retos sugeridos</h2>
        <div class="p-6 bg-white rounded-xl shadow grid md:grid-cols-3 gap-4 text-sm">
            <div class="bg-white rounded-lg p-4 shadow">
                <p class="font-semibold mb-1">Calculadora simple</p>
                <p>Implementa <code>suma(a,b)</code>, <code>resta(a,b)</code>, <code>multiplica(a,b)</code>, <code>divide(a,b)</code>.</p>
            </div>
            <div class="bg-white rounded-lg p-4 shadow">
                <p class="font-semibold mb-1">Temporizador</p>
                <p>Crea <code>tick()</code> sin par√°metros que imprima 5..1 y luego "¬°Tiempo!".</p>
            </div>
            <div class="bg-white rounded-lg p-4 shadow">
                <p class="font-semibold mb-1">Conversor</p>
                <p>Escribe una flecha <code>kmAmi(km)</code> que retorne millas con 2 decimales.</p>
            </div>
        </div>
    </section>
</main>

<footer class="bg-gray-900 text-gray-200">
    <div class="container mx-auto px-6 py-10 text-center">
        <p class="text-lg font-semibold">&copy; 2025 Gu√≠a Interactiva ‚Äî Funciones en JavaScript</p>
        <p class="text-sm text-gray-400 mt-1">Arle Morales Ortiz.</p>
        <div class="mt-3 flex justify-center space-x-4 text-xl">
            <a class="hover:text-white" href="#que-es" title="¬øQu√© es?"><i class="fa-solid fa-circle-question"></i></a>
            <a class="hover:text-white" href="#atm" title="Cajero"><i class="fa-solid fa-vault"></i></a>
            <a class="hover:text-white" href="#flecha" title="Flecha"><i class="fa-solid fa-bolt"></i></a>
        </div>
    </div>
</footer>

<script>
    // ======== Copiar c√≥digo ========
    document.addEventListener('click', (e) => {
        if (e.target.closest('.copy-btn')) {
            const wrap = e.target.closest('.code-wrap');
            const code = wrap.querySelector('pre.code code') || wrap.querySelector('pre code');
            if (!code) return;
            navigator.clipboard.writeText(code.innerText);
            const btn = e.target.closest('.copy-btn');
            const original = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-check"></i> Copiado';
            setTimeout(()=> btn.innerHTML = original, 1500);
        }
    });

    // ======== Tooltips en .hl ========
    const tooltip = document.createElement('div');
    tooltip.className = 'tooltip hidden';
    document.body.appendChild(tooltip);
    function showTip(target){
        const tip = target.getAttribute('data-tip'); if(!tip) return;
        tooltip.textContent = tip; tooltip.classList.remove('hidden');
        const rect = target.getBoundingClientRect();
        tooltip.style.top = (window.scrollY + rect.top - tooltip.offsetHeight - 8) + 'px';
        tooltip.style.left = (window.scrollX + rect.left) + 'px';
        target.classList.add('active');
    }
    function hideTip(){ tooltip.classList.add('hidden'); document.querySelectorAll('.hl.active').forEach(el=> el.classList.remove('active')); }
    document.addEventListener('click', (e)=>{
        if (e.target.classList.contains('hl')) { showTip(e.target); }
        else if (e.target.closest('.explain-btn')) {
            const wrap = e.target.closest('.code-wrap') || e.target.closest('section');
            const tokens = wrap.querySelectorAll('.hl'); let i = 0;
            const timer = setInterval(()=>{
                tokens.forEach(t=> t.classList.remove('step-focus'));
                if (i < tokens.length) { tokens[i].classList.add('step-focus'); showTip(tokens[i]); i++; }
                else { clearInterval(timer); hideTip(); }
            }, 900);
        } else if (!e.target.closest('.tooltip')) { hideTip(); }
    });

    // ======== Salida animada ========
    function writeOut(sel, lines){
        const out = document.querySelector(sel); if(!out) return;
        out.textContent = ''; let i = 0;
        const tick = () => { if (i < lines.length) { out.textContent += (i? '\n' : '') + lines[i]; i++; setTimeout(tick, 120);} };
        tick();
    }

    // ======== Runners ========
    const runners = {
        runQueEs(){ const out = []; function saludar(){ console.log('Hola, Dev!'); out.push('Hola, Dev!'); } saludar(); writeOut('#out-que-es', out); },
        runSintaxis(){ function areaRect(base, altura){ return base * altura; } writeOut('#out-sintaxis', ['√Årea: ' + areaRect(8,5)]); },
        runSinParamSinReturn(){ function alertaSaldoBajo(){ console.log('‚ö†Ô∏è Saldo por debajo del m√≠nimo'); } const out=['‚ö†Ô∏è Saldo por debajo del m√≠nimo']; alertaSaldoBajo(); writeOut('#out-spsr', out); },
        runSinParamSinReturn2(){ function cabecera(){ console.log('==== Reporte Diario ===='); } const out=['==== Reporte Diario ====']; cabecera(); writeOut('#out-spsr2', out); },
        runConParamConReturn(){ function totalConIVA(subtotal, iva){ const impuesto=subtotal*iva; const total=subtotal+impuesto; return total; } writeOut('#out-cpcr', ['Total: ' + totalConIVA(85000,0.19)]); },
        runConParamConReturn2(){ function cToF(c){ return (c*9/5)+32; } writeOut('#out-cpcr2', ['32¬∞C son ' + cToF(32) + ' ¬∞F']); },
        runSinParamConReturn(){ function horaActual(){ const ahora=new Date(); const h=String(ahora.getHours()).padStart(2,'0'); const m=String(ahora.getMinutes()).padStart(2,'0'); return h+':'+m; } writeOut('#out-spcr', ['Hora: ' + horaActual()]); },
        runSinParamConReturn2(){ function codigo(){ const base=Math.floor(Math.random()*9000)+1000; return 'C-' + base; } writeOut('#out-spcr2', ['C√≥digo: ' + codigo()]); },
        runATM(){ let saldo = 150000; function consultar(){ return 'Saldo: ' + saldo + ' COP'; } function depositar(m){ if(m<=0) return 'Monto inv√°lido'; saldo = saldo + m; return 'Dep√≥sito OK. Nuevo saldo: ' + saldo + ' COP'; } function retirar(m){ if(m<=0) return 'Monto inv√°lido'; if(m>saldo) return 'Fondos insuficientes'; saldo = saldo - m; return 'Retiro OK. Nuevo saldo: ' + saldo + ' COP'; } const out=[]; out.push(consultar()); out.push(depositar(25000)); out.push(retirar(70000)); out.push(consultar()); writeOut('#out-atm', out); },
        runFlecha1(){ const sonar = () => { /* sin retorno */ }; writeOut('#out-f1', ['üîî Ding!']); },
        runFlecha2(){ const cuadrado = x => x*x; writeOut('#out-f2', ['9^2 = ' + cuadrado(9)]); },
        runFlecha3(){ const convertir = (monto,tasa)=>{ const total=monto*tasa; return total; }; writeOut('#out-f3', ['Total: ' + convertir(100000,1.19)]); },
        runFlecha4(){ const crearTicket=(codigo,total)=>({codigo:codigo,total:total}); const t = crearTicket('A-01', 55000); writeOut('#out-f4', ['Ticket: ' + t.codigo + ', ' + t.total + ' COP']); }
    };

    document.addEventListener('click', (e)=>{
        const play = e.target.closest('.play-btn');
        if (play) {
            const fn = play.getAttribute('data-run');
            if (fn && typeof runners[fn] === 'function') runners[fn]();
        }
    });
</script>
</body>
</html>
